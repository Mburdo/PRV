{"id":"PRV-u0f","title":"Phase 0: Foundation","description":"Establish build system, CASS integration, and basic data flow. Exit criteria: cargo build produces prv binary, prv debug cass shows session count, unit tests pass for code block parser.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-27T22:44:07.432156-05:00","updated_at":"2025-12-27T22:44:07.432156-05:00"}
{"id":"PRV-u0f.1","title":"phase0.1: Cargo workspace setup","description":"Create Rust cargo workspace structure:\n- Root Cargo.toml with workspace members: prv, prv-core, prv-cass\n- .gitignore for Rust artifacts\n- crates/ directory with subdirectories for each crate\n\nFiles:\n- Cargo.toml (workspace root)\n- .gitignore\n- crates/prv/Cargo.toml\n- crates/prv-core/Cargo.toml  \n- crates/prv-cass/Cargo.toml\n\nVerification: cargo build succeeds (even if crates are empty stubs)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:44:21.587895-05:00","updated_at":"2025-12-27T22:44:21.587895-05:00","dependencies":[{"issue_id":"PRV-u0f.1","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:44:21.588581-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.2","title":"phase0.2: prv-core CodeBlock struct","description":"Create the CodeBlock struct and basic types in prv-core:\n\nFile: crates/prv-core/src/lib.rs\n- pub mod code_block;\n\nFile: crates/prv-core/src/code_block.rs\n- CodeBlock struct with fields: content (String), language (Option\u003cString\u003e), source_line (usize)\n- Derive Debug, Clone, PartialEq\n\nDependencies: Cargo.toml needs no external deps for this\n\nVerification: cargo build succeeds, CodeBlock can be instantiated","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:44:34.800209-05:00","updated_at":"2025-12-27T22:44:34.800209-05:00","dependencies":[{"issue_id":"PRV-u0f.2","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:44:34.800817-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.2","depends_on_id":"PRV-u0f.1","type":"blocks","created_at":"2025-12-27T22:46:44.848477-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.3","title":"phase0.3: Code block parser","description":"Implement code block extraction in prv-core:\n\nFile: crates/prv-core/src/code_block.rs\n\nFunctions:\n- pub fn extract_code_blocks(text: \u0026str) -\u003e Vec\u003cCodeBlock\u003e\n\nMust handle:\n1. Triple-backtick blocks: ```rust ... ```\n2. Language tag extraction from first line\n3. 4-space indented blocks (markdown style)\n4. Unified diff format (lines starting with +)\n5. Malformed/nested blocks (don't crash, skip gracefully)\n\nAdd regex dependency to Cargo.toml\n\nVerification: Unit tests pass (see phase0.4)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:44:49.346901-05:00","updated_at":"2025-12-27T22:44:49.346901-05:00","dependencies":[{"issue_id":"PRV-u0f.3","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:44:49.347939-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.3","depends_on_id":"PRV-u0f.2","type":"blocks","created_at":"2025-12-27T22:46:49.990514-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.4","title":"phase0.4: Code block parser tests","description":"Unit tests for code block parser:\n\nFile: crates/prv-core/src/code_block.rs (inline tests) or tests/code_block_test.rs\n\nTests:\n1. test_triple_backtick_basic - extracts simple code block\n2. test_triple_backtick_with_language - extracts language tag\n3. test_multiple_blocks - extracts all blocks from text\n4. test_4space_indent - extracts indented code\n5. test_diff_format - extracts + lines from unified diff\n6. test_malformed_unclosed - handles unclosed block gracefully\n7. test_nested_blocks - handles nested backticks\n8. test_empty_input - returns empty vec\n\nVerification: cargo test passes","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:45:04.049102-05:00","updated_at":"2025-12-27T22:45:04.049102-05:00","dependencies":[{"issue_id":"PRV-u0f.4","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:45:04.049992-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.4","depends_on_id":"PRV-u0f.3","type":"blocks","created_at":"2025-12-27T22:46:55.133709-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.5","title":"phase0.5: prv-cass models","description":"Create CASS data models in prv-cass:\n\nFile: crates/prv-cass/src/lib.rs\n- pub mod models;\n- pub mod db;\n- pub mod workspace;\n\nFile: crates/prv-cass/src/models.rs\n\nStructs (matching CASS SQLite schema):\n- Workspace { id: i64, path: String }\n- Conversation { id: i64, workspace_id: i64, started_at: i64, ended_at: Option\u003ci64\u003e, title: Option\u003cString\u003e, source_path: Option\u003cString\u003e }\n- Message { id: i64, conversation_id: i64, role: String, content: String, created_at: i64 }\n\nDerive Debug, Clone for all\n\nVerification: cargo build succeeds","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:45:16.91049-05:00","updated_at":"2025-12-27T22:45:16.91049-05:00","dependencies":[{"issue_id":"PRV-u0f.5","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:45:16.911155-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.5","depends_on_id":"PRV-u0f.1","type":"blocks","created_at":"2025-12-27T22:47:00.274803-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.6","title":"phase0.6: CASS database connection","description":"Implement CASS SQLite connection in prv-cass:\n\nFile: crates/prv-cass/src/db.rs\n\nAdd rusqlite and anyhow to Cargo.toml\n\nStruct CassDb:\n- conn: rusqlite::Connection\n\nMethods:\n- pub fn open() -\u003e Result\u003cSelf\u003e - find CASS db at ~/Library/Application Support/com.coding-agent-search.coding-agent-search/agent_search.db\n- pub fn workspaces(\u0026self) -\u003e Result\u003cVec\u003cWorkspace\u003e\u003e\n- pub fn conversations(\u0026self, workspace_id: i64) -\u003e Result\u003cVec\u003cConversation\u003e\u003e\n- pub fn messages(\u0026self, conversation_id: i64) -\u003e Result\u003cVec\u003cMessage\u003e\u003e\n- pub fn session_count(\u0026self) -\u003e Result\u003ci64\u003e\n\nHandle missing database with clear error message\n\nVerification: Can connect and query CASS database","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:45:31.642545-05:00","updated_at":"2025-12-27T22:45:31.642545-05:00","dependencies":[{"issue_id":"PRV-u0f.6","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:45:31.643222-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.6","depends_on_id":"PRV-u0f.5","type":"blocks","created_at":"2025-12-27T22:47:05.398218-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.7","title":"phase0.7: Workspace-repo mapping","description":"Implement workspace-to-repo mapping in prv-cass:\n\nFile: crates/prv-cass/src/workspace.rs\n\nFunctions:\n- pub fn find_workspace_for_repo(db: \u0026CassDb, repo_path: \u0026Path) -\u003e Result\u003cOption\u003cWorkspace\u003e\u003e\n\nRequirements (from REQ-004):\n- Handle trailing slashes in paths\n- Handle symlinks (canonicalize paths)\n- Case-insensitive matching on macOS\n- Handle nested git repos (closest .git parent wins)\n- Cache workspace mappings for performance (optional for phase 0)\n\nVerification: Can find workspace for current PRV repo path","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:45:44.987758-05:00","updated_at":"2025-12-27T22:45:44.987758-05:00","dependencies":[{"issue_id":"PRV-u0f.7","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:45:44.988506-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.7","depends_on_id":"PRV-u0f.6","type":"blocks","created_at":"2025-12-27T22:47:10.52514-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.8","title":"phase0.8: CLI binary with clap","description":"Create CLI entry point with clap:\n\nFile: crates/prv/src/main.rs\n\nAdd clap dependency with derive feature to Cargo.toml\n\nStructure:\n- #[derive(Parser)] struct Cli\n- #[derive(Subcommand)] enum Commands { Debug(DebugArgs) }\n- #[derive(Args)] struct DebugArgs with subcommand for 'cass'\n\nCommands:\n- prv --version (from clap)\n- prv --help (from clap)\n- prv debug cass (placeholder, implemented in phase0.9)\n\nVerification: prv --version and prv --help work","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:45:58.067236-05:00","updated_at":"2025-12-27T22:45:58.067236-05:00","dependencies":[{"issue_id":"PRV-u0f.8","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:45:58.067886-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.8","depends_on_id":"PRV-u0f.1","type":"blocks","created_at":"2025-12-27T22:47:15.64591-05:00","created_by":"burdo"}]}
{"id":"PRV-u0f.9","title":"phase0.9: prv debug cass command","description":"Implement the debug cass command that wires everything together:\n\nFile: crates/prv/src/main.rs (or separate module)\n\nCommand: prv debug cass\n\nOutput:\n- CASS database path\n- Connection status (found/not found)\n- Workspace count\n- Conversation/session count\n- Sample: extract code blocks from most recent message\n\nExample output:\n  CASS Database: ~/Library/Application Support/.../agent_search.db\n  Status: Connected\n  Workspaces: 12\n  Sessions: 545\n  Messages: 55,775\n  \n  Sample code block extraction:\n  [shows 1-2 extracted blocks from recent message]\n\nThis is the integration test for Phase 0.\n\nVerification: prv debug cass runs and shows accurate counts","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T22:46:13.58871-05:00","updated_at":"2025-12-27T22:46:13.58871-05:00","dependencies":[{"issue_id":"PRV-u0f.9","depends_on_id":"PRV-u0f","type":"parent-child","created_at":"2025-12-27T22:46:13.589353-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.9","depends_on_id":"PRV-u0f.3","type":"blocks","created_at":"2025-12-27T22:47:20.777889-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.9","depends_on_id":"PRV-u0f.7","type":"blocks","created_at":"2025-12-27T22:47:25.896613-05:00","created_by":"burdo"},{"issue_id":"PRV-u0f.9","depends_on_id":"PRV-u0f.8","type":"blocks","created_at":"2025-12-27T22:47:31.027248-05:00","created_by":"burdo"}]}
